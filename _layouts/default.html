---
layout: compress
---


<!DOCTYPE html>
<html>
{% include head.html %}
  <body>
    <div class="content" id="header">
      {% include header.html %}
    </div>
    <div class="content" id="main-content">
      <div class="content-wrapper">
        <div id="react-app">
          {{ content }}
        </div>
      </div>
    </div>
    {% include footer.html %}
    {% include syntax_highlight.html %}
    
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // 使用 React.createElement 重写原来的 React 组件
        function App() {
          const [currentPage, setCurrentPage] = React.useState(window.location.pathname);
          const [content, setContent] = React.useState(document.getElementById('react-app').innerHTML);
          const [loading, setLoading] = React.useState(false);
          
          // 更新活动菜单项
          React.useEffect(() => {
            const menuLinks = document.querySelectorAll('.menu a');
            menuLinks.forEach(link => {
              link.classList.remove('active');
              if (link.getAttribute('href') === currentPage) {
                link.classList.add('active');
              }
            });
          }, [currentPage]);
          
          // 监听浏览器前进后退按钮
          React.useEffect(() => {
            const handlePopState = () => {
              setCurrentPage(window.location.pathname);
            };
            
            window.addEventListener('popstate', handlePopState);
            
            // 清理事件监听器
            return () => {
              window.removeEventListener('popstate', handlePopState);
            };
          }, []);
          
          // 创建 React 元素而不是使用 JSX
          return React.createElement(
            'div',
            { className: `page-transition ${loading ? 'loading' : ''}` },
            React.createElement('div', {
              dangerouslySetInnerHTML: { __html: content }
            })
          );
        }
        
        // 渲染 React 应用
        const root = ReactDOM.createRoot(document.getElementById('react-app'));
        root.render(React.createElement(App));
      });
    </script>
  </body>
</html>